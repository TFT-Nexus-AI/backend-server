# Nexus-TFT 시스템 요구사항 명세서

## 1. 시스템 개요

### 1.1 시스템 목적
**Nexus-TFT**는 전략적 팀 전투(TFT) 플레이어의 게임 플레이를 심층적으로 분석하고, AI를 통해 개인화된 피드백을 제공하는 웹 서비스입니다. 사용자는 자신의 게임 기록을 바탕으로 강점, 약점, 선호하는 전략 등을 파악하여 실력을 향상시킬 수 있습니다.

### 1.2 시스템 범위
- TFT 게임 데이터 수집 및 저장
- 사용자 게임 기록 분석
- AI 기반 개인화된 피드백 제공
- 게임 성과 시각화 및 리포트 생성

### 1.3 대상 사용자
- TFT 플레이어 (모든 수준)
- 실력 향상을 원하는 게이머
- 게임 데이터 분석에 관심 있는 사용자

### 1.4 참조 문서
- 도메인 모델 명세서 (도메인모델.md)
- 시스템 설계 문서 (SYSTEM_DESIGN.md)
- Riot API 문서 (RIOT_API.md)

## 2. 기능 요구사항 (Functional Requirements)

### 2.1 사용자 관리

#### 2.1.1 사용자 정보 조회
- **FR-001**: 시스템은 사용자의 `gameName`과 `tagLine`을 입력받아 Riot API를 통해 사용자 정보를 조회할 수 있어야 한다.
- **FR-002**: 비로그인 사용자도 `gameName`과 `tagLine`만으로 전적 조회가 가능해야 한다.
- **FR-003**: 조회된 사용자 정보는 시스템 내부에 저장되어 관리되어야 한다.

#### 2.1.2 사용자 인증 (향후 구현)
- **FR-004**: 사용자는 Riot Login (RSO)을 통해 인증할 수 있어야 한다.
- **FR-005**: 인증된 사용자는 추가적인 개인화 기능을 이용할 수 있어야 한다.

#### 2.1.3 사용자 데이터 검증
- **FR-006**: `puuid`는 필수값이며 비어 있을 수 없다.
- **FR-007**: `gameName`은 필수값이며 비어 있을 수 없다.
- **FR-008**: `tagLine`은 필수값이며 비어 있을 수 없다.

### 2.2 매치 데이터 관리

#### 2.2.1 매치 데이터 수집
- **FR-009**: 시스템은 Riot API를 통해 사용자의 TFT 매치 데이터를 실시간으로 수집할 수 있어야 한다.
- **FR-010**: 매치 데이터는 고유한 `matchId`로 식별되어야 한다.
- **FR-011**: 중복된 매치 데이터는 저장되지 않아야 한다.

#### 2.2.2 매치 정보 저장
- **FR-012**: 매치 정보는 다음 데이터를 포함해야 한다:
  - 매치 ID (matchId)
  - 게임 시작 시각 (gameDatetime)
  - 게임 진행 시간 (gameLength)
  - 게임 클라이언트 버전 (gameVersion)
  - TFT 세트 정보 (tftSet)

#### 2.2.3 매치 데이터 검증
- **FR-013**: `matchId`는 "KR_1234567890" 형식이어야 한다.
- **FR-014**: `gameDatetime`은 양수여야 한다.
- **FR-015**: `gameLength`는 0초 초과, 2시간(7200초) 이하여야 한다.
- **FR-016**: `gameVersion`과 `tftSet`은 필수값이며 비어 있을 수 없다.

#### 2.2.4 매치 분석 기능
- **FR-017**: 시스템은 매치가 최근 30일 이내에 있었는지 확인할 수 있어야 한다.
- **FR-018**: 시스템은 게임 길이가 40분(2400초)을 초과하는지 확인할 수 있어야 한다.

### 2.3 참가자 데이터 관리

#### 2.3.1 참가자 정보 저장
- **FR-019**: 각 매치의 참가자 정보는 다음 데이터를 포함해야 한다:
  - 매치 ID 연결 (matchId)
  - 사용자 ID 연결 (puuid)
  - 최종 등수 (placement)
  - 최종 레벨 (level)
  - 남은 골드 (goldLeft)
  - 다른 플레이어에게 입힌 총 피해량 (totalDamageToPlayers)

#### 2.3.2 참가자 데이터 검증
- **FR-020**: `placement`는 1 이상 8 이하의 정수여야 한다.
- **FR-021**: 하나의 참가자는 반드시 하나의 매치와 하나의 사용자에 연결되어야 한다.

### 2.4 게임 구성 요소 관리

#### 2.4.1 유닛 정보 관리
- **FR-022**: 참가자가 사용한 유닛 정보를 저장해야 한다:
  - 캐릭터 ID (characterId)
  - 유닛 등급 (tier)
  - 장착한 아이템 목록 (items)

#### 2.4.2 특성(시너지) 정보 관리
- **FR-023**: 참가자가 활성화한 특성 정보를 저장해야 한다:
  - 특성 이름 (traitName)
  - 해당 특성을 가진 유닛 수 (numUnits)
  - 특성 등급 (style: 0=비활성, 1=브론즈, 2=실버, 3=골드, 4=프리즘)

#### 2.4.3 증강 정보 관리
- **FR-024**: 참가자가 선택한 증강 정보를 저장해야 한다:
  - 증강 ID (augmentId)

### 2.5 외부 API 연동

#### 2.5.1 Riot API 연동
- **FR-025**: 시스템은 Riot Games API와 안정적으로 연동되어야 한다.
- **FR-026**: API 호출 제한(Rate Limit)을 준수해야 한다.
- **FR-027**: API 응답 오류에 대한 적절한 처리가 이루어져야 한다.

### 2.6 AI 분석 기능 (향후 구현)

#### 2.6.1 게임 플레이 분석
- **FR-028**: AI는 사용자의 게임 기록을 분석하여 강점과 약점을 파악해야 한다.
- **FR-029**: AI는 개인화된 피드백과 개선 제안을 제공해야 한다.
- **FR-030**: AI 분석 결과는 구조화된 리포트 형태로 제공되어야 한다.

## 3. 비기능 요구사항 (Non-Functional Requirements)

### 3.1 성능 요구사항

#### 3.1.1 응답 시간
- **NFR-001**: 사용자 전적 조회 요청은 5초 이내에 응답되어야 한다.
- **NFR-002**: 매치 데이터 조회는 3초 이내에 응답되어야 한다.
- **NFR-003**: AI 분석 결과는 30초 이내에 제공되어야 한다.

#### 3.1.2 처리량
- **NFR-004**: 시스템은 동시에 100명의 사용자 요청을 처리할 수 있어야 한다.
- **NFR-005**: 시간당 10,000건의 매치 데이터를 처리할 수 있어야 한다.

### 3.2 가용성 요구사항
- **NFR-006**: 시스템은 99.5% 이상의 가용성을 보장해야 한다.
- **NFR-007**: 계획된 유지보수를 제외하고 월 4시간 이하의 다운타임을 유지해야 한다.

### 3.3 확장성 요구사항
- **NFR-008**: 시스템은 사용자 수 증가에 따라 수평적 확장이 가능해야 한다.
- **NFR-009**: 데이터베이스는 대용량 매치 데이터 저장에 최적화되어야 한다.

### 3.4 보안 요구사항
- **NFR-010**: 모든 외부 API 통신은 HTTPS를 사용해야 한다.
- **NFR-011**: 사용자 개인정보는 암호화되어 저장되어야 한다.
- **NFR-012**: API 키 및 민감한 설정 정보는 안전하게 관리되어야 한다.

### 3.5 유지보수성 요구사항
- **NFR-013**: 코드는 명확한 아키텍처 패턴을 따라야 한다.
- **NFR-014**: 모든 비즈니스 로직은 단위 테스트로 검증되어야 한다.
- **NFR-015**: API 문서는 자동으로 생성되고 최신 상태를 유지해야 한다.

---

## 4. 기술 요구사항

### 4.1 개발 언어 및 프레임워크
- **TR-001**: 백엔드 시스템은 Java 21과 Spring Boot 프레임워크를 기반으로 개발한다.
- **TR-002**: 빌드 도구는 Gradle을 사용한다.

### 4.2 아키텍처 요구사항
- **TR-003**: 프로젝트는 모듈러 모노리스(Modular Monolith) 구조를 채택한다.
- **TR-004**: 모듈은 최소 app, domain, storage, clients 등으로 분리하여 각 계층의 책임을 명확히 한다:
  - app: Presentation Layer (API Endpoints), 유일한 실행 모듈
  - domain: Core Business Logic, Repository 인터페이스 정의
  - storage: Persistence Layer, Domain의 Repository 인터페이스 구현
- **TR-005**: DDD(도메인 주도 설계)의 개념(특히 Aggregate)을 적용하여 개발을 진행한다.
- **TR-006**: 초기에는 Port/Adapter(헥사고날) 구조를 적용하지 않고, domain 모듈 내에 기능별 패키지(user, match 등)로 분리하여 개발한다.

### 4.3 AI 통합 전략
- **TR-007**: 단기 전략: 초기 버전의 빠른 출시를 위해 외부 AI API(e.g., Claude, GPT 등)를 연동하여 분석 리포트 생성 기능을 구현한다.
- **TR-008**: 장기 전략: 서비스 운영을 통해 축적된 모든 경기 데이터를 활용하여, 자체적인 머신러닝 모델을 개발한다.

---

## 5. 데이터 요구사항

### 5.1 데이터 모델
시스템은 다음과 같은 핵심 엔티티를 관리해야 한다:
- User: 사용자 정보 (puuid, gameName, tagLine)
- Match: 매치 정보 (matchId, gameDatetime, gameLength, gameVersion, tftSet)
- Participant: 참가자 정보 (placement, level, goldLeft, totalDamageToPlayers)
- ParticipantUnit: 사용 유닛 정보 (characterId, tier, items)
- ParticipantTrait: 활성화 특성 정보 (traitName, numUnits, style)
- ParticipantAugment: 선택 증강 정보 (augmentId)

### 5.2 데이터 보존
- **DR-001**: 매치 데이터는 최소 2년간 보존되어야 한다.
- **DR-002**: 사용자 데이터는 사용자가 삭제를 요청할 때까지 보존되어야 한다.
- **DR-003**: 시스템 로그는 최소 6개월간 보존되어야 한다.

### 5.3 데이터 백업
- **DR-004**: 데이터베이스는 일일 자동 백업되어야 한다.
- **DR-005**: 백업 데이터는 별도 위치에 저장되어야 한다.
- **DR-006**: 백업으로부터 4시간 이내에 복구가 가능해야 한다.

---

## 6. 외부 인터페이스 요구사항

### 6.1 Riot Games API
- **EI-001**: Riot Games API v4를 사용해야 한다.
- **EI-002**: 다음 API 엔드포인트를 활용해야 한다:
  - Account API: 사용자 정보 조회
  - TFT Match API: 매치 데이터 조회
  - TFT League API: 랭킹 정보 조회

### 6.2 사용자 인터페이스
- **EI-003**: 웹 브라우저를 통한 접근이 가능해야 한다.
- **EI-004**: 모바일 브라우저에서도 사용 가능해야 한다.
- **EI-005**: RESTful API를 제공하여 외부 애플리케이션과의 연동을 지원해야 한다.

---

## 7. 제약사항

### 7.1 기술적 제약사항
- **C-001**: Java 21 이상을 사용해야 한다.
- **C-002**: Spring Boot 프레임워크를 사용해야 한다.
- **C-003**: 관계형 데이터베이스를 사용해야 한다.

### 7.2 외부 종속성
- **C-004**: Riot Games API 정책 및 제한사항을 준수해야 한다.
- **C-005**: Riot Games의 데이터 사용 약관을 준수해야 한다.

### 7.3 운영 제약사항
- **C-006**: 시스템은 24시간 연중무휴 운영되어야 한다.
- **C-007**: 정기 유지보수는 사용자가 적은 시간대에 수행되어야 한다.

---

## 8. 개발 프로세스 요구사항

### 8.1 테스트 요구사항
- **DP-001**: 테스트 주도 개발(TDD) 방법론을 적극적으로 도입한다.
- **DP-002**: 기능 개발 전, 테스트 목록을 작성하고 이를 기반으로 Red-Green-Refactor 사이클을 준수하여 개발을 진행한다.
- **DP-003**: 모든 도메인 로직은 단위 테스트로 검증되어야 한다.
- **DP-004**: API 엔드포인트는 통합 테스트로 검증되어야 한다.

---

## 9. 향후 확장 계획

### 9.1 단기 확장 (3개월 이내)
- Riot Login (RSO) 인증 기능 구현
- 기본적인 AI 분석 기능 구현
- 사용자 대시보드 개선

### 9.2 중기 확장 (6개월 이내)
- 고급 AI 분석 알고리즘 적용
- 사용자별 맞춤형 추천 시스템
- 소셜 기능 (친구, 랭킹 비교)

### 9.3 장기 확장 (1년 이내)
- 다중 게임 모드 지원
- 실시간 게임 분석
- 모바일 애플리케이션 개발

---

## 10. 승인 및 검토

이 요구사항 명세서는 개발팀, 제품팀, 품질보증팀의 검토를 거쳐 승인되어야 하며, 요구사항 변경 시에는 모든 이해관계자의 합의가 필요합니다.

**문서 버전**: 2.0  
**기반 문서**: 도메인 모델 명세서 (도메인모델.md)  
**최종 수정일**: 2024년 8월 14일  
**다음 검토 예정일**: 2024년 9월 14일