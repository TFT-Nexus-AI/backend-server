네, 제공해주신 참고 자료를 바탕으로 기존 도메인 모델 문서를 훨씬 더 상세하고 구체적인 내용으로 보강하겠습니다. Splearn 예시처럼 각 엔티티의 **속성, 행위, 규칙**을 명확히 구분하고, 생성자, 유효성 검사 규칙 등 코드 레벨의 제약까지 상세하게 기술하여 실질적인 개발에 도움이 되도록 문서를 다시 작성하겠습니다.

-----

# Nexus-TFT 도메인 모델

## Nexus-TFT 도메인

**Nexus-TFT**는 전략적 팀 전투(TFT) 플레이어의 게임 플레이를 심층적으로 분석하고, AI를 통해 개인화된 피드백을 제공하는 웹 서비스입니다. 사용자는 자신의 게임 기록을 바탕으로 강점, 약점, 선호하는 전략 등을 파악하여 실력을 향상시킬 수 있습니다.

* **핵심 기능**: 사용자의 `gameName`과 `tagLine`을 입력받아 Riot API로부터 전적 데이터를 조회하고, AI가 이를 분석하여 리포트를 제공합니다.
* **사용자**: 비로그인 사용자도 `gameName`과 `tagLine`만으로 전적 조회가 가능합니다. 추후 Riot Login (RSO)을 통한 사용자 인증 기능이 도입될 예정입니다.
* **기술**: **Riot API**와 연동하여 실시간 게임 데이터를 가져옵니다.

-----

## 도메인 모델 (Entity)

시스템의 핵심을 구성하는 도메인 엔티티와 그 속성, 행위, 규칙을 상세히 정의합니다.

### User (사용자)

시스템의 사용자입니다. Riot 계정 정보를 통해 식별됩니다.

* **속성 (Attributes)**

    * `id`: 시스템 내부 관리용 ID (PK)
    * `puuid`: 사용자의 고유 Riot ID (UNIQUE)
    * `gameName`: Riot ID
    * `tagLine`: Riot Tag
    * `createdAt`: 생성 시각

* **행위 (Behaviors)**

    * `User(puuid, gameName, tagLine, createdAt)`: User 객체를 생성합니다. `createdAt`이 `null`일 경우 현재 시각으로 자동 할당됩니다.
    * `create(puuid, gameName, tagLine)`: 유효성 검사를 포함하여 새로운 User 객체를 생성하는 정적 팩토리 메서드입니다.

* **규칙 (Rules)**

    * `puuid`는 필수값이며 비어 있을 수 없습니다.
    * `gameName`은 필수값이며 비어 있을 수 없습니다.
    * `tagLine`은 필수값이며 비어 있을 수 없습니다.

-----

### Match (경기)

한 번의 TFT 게임 경기에 대한 정보를 나타냅니다.

* **속성 (Attributes)**

    * `id`: 시스템 내부 관리용 ID (PK)
    * `matchId`: Riot 매치 ID (UNIQUE)
    * `gameDatetime`: 게임 시작 시각 (Unix Timestamp)
    * `gameLength`: 게임 진행 시간 (초)
    * `gameVersion`: 게임 클라이언트 버전
    * `tftSet`: TFT 세트 정보

* **행위 (Behaviors)**

    * `create(...)`: ID 없이 새로운 Match 도메인 객체를 생성합니다.
    * `of(...)`: 모든 필드를 포함하여 Match 도메인 객체를 생성합니다.
    * `isRecentMatch()`: 경기가 최근 30일 이내에 있었는지 확인합니다.
    * `isLongMatch()`: 게임 길이가 40분(2400초)을 초과하는지 확인합니다.

* **규칙 (Rules)**

    * `matchId`는 `KR_1234567890` 형식이어야 합니다.
    * `gameDatetime`은 양수여야 합니다.
    * `gameLength`는 0초 초과, 2시간(7200초) 이하여야 합니다.
    * `gameVersion`과 `tftSet`은 필수값이며 비어 있을 수 없습니다.

-----

### Participant (참가자)

특정 경기에 참여한 한 명의 플레이어에 대한 상세 기록입니다.

* **속성 (Attributes)**

    * `id`: 시스템 내부 관리용 ID (PK)
    * `matchId`: `Match`의 외래키 (FK)
    * `puuid`: `User`의 외래키 (FK)
    * `placement`: 최종 등수
    * `level`: 최종 레벨
    * `goldLeft`: 남은 골드
    * `totalDamageToPlayers`: 다른 플레이어에게 입힌 총 피해량
    * `units`: 사용한 유닛 목록 (`ParticipantUnit` 리스트)
    * `traits`: 활성화한 특성 목록 (`ParticipantTrait` 리스트)
    * `augments`: 선택한 증강 목록 (`ParticipantAugment` 리스트)

* **규칙 (Rules)**

    * `placement`는 1 이상 8 이하의 정수여야 합니다.
    * 하나의 `Participant`는 반드시 하나의 `Match`와 하나의 `User`에 연결되어야 합니다.

-----

### ParticipantTrait (참가자 특성)

참가자가 활성화한 시너지(특성) 정보입니다.

* **속성 (Attributes)**

    * `id`: 시스템 내부 관리용 ID (PK)
    * `participantId`: `Participant`의 외래키 (FK)
    * `traitName`: 특성 이름 (예: "Storyweaver")
    * `numUnits`: 해당 특성을 가진 유닛 수
    * `style`: 특성 등급 (0: 비활성, 1: 브론즈, 2: 실버, 3: 골드, 4: 프리즘)

* **행위 (Behaviors)**

    * **`TraitStyle` (Enum)**: `style` 속성을 관리하는 열거형 타입입니다.
        * `BRONZE(1)`, `SILVER(2)`, `GOLD(3)`, `PRISMATIC(4)` 등의 멤버를 가집니다.

-----

## 시각화 (Mermaid)

```mermaid
classDiagram
    class User {
        +String puuid
        +String gameName
        +String tagLine
        +LocalDateTime createdAt
        +create(puuid, gameName, tagLine) User
    }

    class Match {
        +String matchId
        +Long gameDatetime
        +Float gameLength
        +isRecentMatch() bool
        +isLongMatch() bool
    }

    class Participant {
        +String puuid
        +String matchId
        +int placement
        +int level
    }

    class ParticipantUnit {
        +String characterId
        +int tier
        +String[] items
    }

    class ParticipantTrait {
        +String traitName
        +int numUnits
        +TraitStyle style
    }

    class ParticipantAugment {
        +String augmentId
    }

    enum TraitStyle {
        BRONZE
        SILVER
        GOLD
        PRISMATIC
    }

    User "1" -- "0..*" Participant : has
    Match "1" -- "1..*" Participant : contains
    Participant "1" -- "0..*" ParticipantUnit : used
    Participant "1" -- "0..*" ParticipantTrait : activated
    Participant "1" -- "0..*" ParticipantAugment : selected
    ParticipantTrait -- TraitStyle

```

-----

## 이야기 하고 다듬기 (반복)

이 도메인 모델은 현재 요구사항과 제공된 코드를 기반으로 최대한 상세하게 작성되었습니다. AI 분석 기능이 구체화됨에 따라, `Analysis` 와 `AnalysisResult` 같은 새로운 엔티티와 그에 따른 규칙, 행위가 추가되어야 합니다. 지속적인 모델 검토를 통해 비즈니스 로직이 코드에 명확하게 반영되도록 유지하는 것이 중요합니다.